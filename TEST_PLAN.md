# Test Plan — Account Management System (COBOL)

This test plan captures the existing business logic of the COBOL application (`main.cob`, `operations.cob`, `data.cob`) so stakeholders can validate current behavior before/while porting to Python.

Use this plan to run interactive scenarios against the COBOL app and record the Actual Result and Status (Pass/Fail).

## Quick checklist

- Includes columns: Test Case ID, Description, Pre-conditions, Test Steps, Expected Result, Actual Result, Status, Comments — Done
- Covers business logic from `main.cob`, `operations.cob`, and `data.cob` (menu, read/write storage, credit, debit, insufficient funds, edge cases) — Done
- Leaves Actual Result and Status blank for stakeholder validation — Done

## Test Plan

| Test Case ID | Test Case Description | Pre-conditions | Test Steps | Expected Result | Actual Result | Status (Pass/Fail) | Comments |
|---|---|---:|---|---|---|---|---|
| TC-01 | Menu: valid choices 1-4 route to correct actions | App started, initial balance 1000.00 | 1) At menu enter `1` → observe. 2) Return to menu, enter `2` → observe prompt for credit. 3) Return, enter `3` → observe prompt for debit. 4) Return, enter `4`. | 1) Displays current balance. 2) Shows "Enter credit amount:" prompt. 3) Shows "Enter debit amount:" prompt. 4) Program exits with "Exiting the program. Goodbye!" | Displayed current balance when choosing `1`; prompts shown for credit/debit; program exited after choosing `4`. | Pass | Automated test `test_menu_routes_to_actions_and_exit` covered this flow. Validate interactive timing with stakeholders if needed. |
| TC-02 | View balance (TOTAL) displays stored balance | App started, `STORAGE-BALANCE` = 1000.00 | At menu enter `1` | Displays "Current balance: 1000.00" (matching storage format) | Displayed "Current balance: 1000.00" | Pass | Automated test `test_view_balance` passed. Confirms `DataProgram READ` returns storage value |
| TC-03 | Credit a valid positive amount and persist | Start balance 1000.00 | 1) Choose `2`. 2) Enter `200.50`. 3) After success, choose `1` to view balance. | After credit, displays "Amount credited. New balance: 1200.50". Viewing balance shows 1200.50 (persistence across calls) | Displayed "Amount credited. New balance: 1200.50"; balance became 1200.50 | Pass | Automated test `test_credit_valid` passed. Confirms add + write flow and persistence |
| TC-04 | Debit a valid amount less than balance | Start balance 1000.00 | 1) Choose `3`. 2) Enter `250.25`. 3) Choose `1` to view | Displays "Amount debited. New balance: 749.75". Viewing balance shows 749.75 | Displayed "Amount debited. New balance: 749.75"; balance became 749.75 | Pass | Automated test `test_debit_valid` passed. Confirms subtract + write flow |
| TC-05 | Debit an amount equal to the balance → zero balance | Start balance 500.00 (setup) | 1) Choose `3`. 2) Enter `500.00`. 3) Choose `1` | Displays "Amount debited. New balance: 0.00". Viewing shows 0.00 | Displayed "Amount debited. New balance: 0.00"; balance became 0.00 | Pass | Automated test `test_debit_equal` passed. Edge: exact-equality allowed |
| TC-06 | Debit amount greater than balance → insufficient funds, no change | Start balance 300.00 | 1) Choose `3`. 2) Enter `400.00`. 3) Choose `1` | Displays "Insufficient funds for this debit." Balance remains 300.00 | Displayed "Insufficient funds for this debit."; balance remained 300.00 | Pass | Automated test `test_debit_insufficient` passed. Confirms guard prevents negative balances in normal debit case |
| TC-07 | Multiple sequential operations persist correctly | Start balance 1000.00 | 1) Choose `2`, credit `100.00`. 2) Choose `3`, debit `50.00`. 3) Choose `1` | After credit: 1100.00; after debit: 1050.00; view shows 1050.00 | After the sequence the balance was 1050.00 | Pass | Automated test `test_multiple_sequential_operations_persist` validated cumulative operations (credit then debit). |
| TC-08 | Credit zero amount | Start balance 1000.00 | 1) Choose `2`. 2) Enter `0.00`. 3) Choose `1` | Displays "Amount credited. New balance: 1000.00". Balance unchanged | Displayed "Amount credited. New balance: 1000.00"; balance remained 1000.00 | Pass | Automated test `test_zero_credit_and_debit` (credit part) passed. Current behavior: zero allowed |
| TC-09 | Debit zero amount | Start balance 1000.00 | 1) Choose `3`. 2) Enter `0.00`. 3) Choose `1` | Displays "Amount debited. New balance: 1000.00". Balance unchanged | Displayed "Amount debited. New balance: 1000.00"; balance remained 1000.00 | Pass | Automated test `test_zero_credit_and_debit` (debit part) passed. Current behavior: zero allowed |
| TC-10 | Credit negative amount (business rule verification) | Start balance 1000.00 | 1) Choose `2`. 2) Enter `-100.00`. 3) Choose `1` | Current implementation: accepts negative and results in balance 900.00 (i.e., reduces balance). Record actual. | Displayed "Amount credited. New balance: 900.00"; balance became 900.00 | Pass | Automated test `test_negative_credit_and_debit` observed negative credit reduces balance. This may be a business-policy gap. |
| TC-11 | Debit negative amount (business rule verification) | Start balance 1000.00 | 1) Choose `3`. 2) Enter `-50.00`. 3) Choose `1` | Current implementation: treats negative as subtracting negative → increases balance to 1050.00. Record actual. | Observed behavior: negative debit increases balance (automated test exercised negative debit after a negative credit and observed increase). | Pass | Automated test `test_negative_credit_and_debit` confirms negative debit causes balance to increase; clarify intended policy. |
| TC-12 | Non-numeric amount input handling | Start balance 1000.00 | 1) Choose `2` or `3`. 2) Enter `abc` (or alphanumeric) when prompted | Observe behavior: either input rejected, treated as 0.00, or causes an error. Record actual behavior and program stability. | Displayed "Invalid amount entered."; balance remained 1000.00 | Pass | Automated test `test_non_numeric_input` passed. Current Python port rejects non-numeric input; COBOL behavior may differ and should be validated. |
| TC-13 | Amount exceeding field max (overflow) | Start balance 1000.00 | 1) Choose `2`. 2) Enter `1000000.00` (1,000,000.00) which is > PIC 9(6)V99 max 999999.99 | Observe whether app rejects, truncates, raises error, or wraps. Record behaviour. | Python port accepted the large amount and updated balance to 1001000.00; COBOL field limits may differ. | Pass | Automated test `test_overflow_amount_is_handled` confirmed the Python port accepts large values; confirm COBOL platform behavior with stakeholders. |
| TC-14 | Invalid menu choice loops with message | App started | At menu enter `5` or a letter | Displays "Invalid choice, please select 1-4." and returns to menu | Displayed "Invalid choice, please select 1-4." and returned to menu | Pass | Automated test `test_invalid_menu_choice_shows_message` passed. |
| TC-15 | Exit option terminates program cleanly | App started | At menu enter `4` | Program shows "Exiting the program. Goodbye!" and stops | Program displayed "Exiting the program. Goodbye!" and terminated main loop | Pass | Automated test `test_exit_option_terminates_cleanly` passed. |
| TC-16 | Data persistence across application restart | Start app, credit 100.00, exit, restart app | 1) Start app (initial). 2) Choose `2`, credit `100.00`. 3) Choose `4` to exit. 4) Restart program and choose `1`. | Expected: Current implementation resets `STORAGE-BALANCE` to initial 1000.00 on process restart (no durable persistence). Record actual to confirm. | In the Python port, reloading the `data` module reset the in-memory storage to 1000.00 (no durable persistence). | Pass | Automated test `test_persistence_across_module_reload` validated that module reload resets in-memory storage; verify COBOL runtime persistence separately. |
| TC-17 | READ then immediate WRITE without change | Start balance 1000.00 | 1) Choose `1` to read (TOTAL). 2) Immediately perform `2` and enter `0.00` to write same balance. 3) Choose `1` | Confirm no rounding/precision change and balance equals original (1000.00) | Read then write with 0.00 left the balance at 1000.00; displayed balances showed 1000.00 | Pass | Automated test `test_read_then_write_no_change` validated no precision loss with a 0.00 write. |
| TC-18 | Input and display precision test | Start balance 1000.00 | 1) Choose `2`. 2) Enter `0.1` (one decimal). 3) Choose `1` | Expected: shows 1000.10 (two-decimal behavior). Record exact displayed formatting. | Displayed "New balance: 1000.10" after credit and showed two-decimal formatting | Pass | Automated test `test_input_precision_shows_two_decimals` validated two-decimal display. |


## Notes for stakeholders

- The COBOL application holds `STORAGE-BALANCE` in memory with initial value `1000.00` (see `data.cob`). It does not perform durable persistence across process restarts.
- The current implementation does not explicitly validate negative or non-numeric inputs before arithmetic; behavior may be platform-dependent. Please confirm the intended business rules for:
  - Accepting/rejecting negative amounts for credit/debit
  - Handling non-numeric input
  - Required numeric bounds and persistence guarantees

